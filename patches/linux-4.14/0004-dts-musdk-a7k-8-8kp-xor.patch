From f09ded5b09ad9c016c1960407aa8a765e0a52ec0 Mon Sep 17 00:00:00 2001
From: Yuval Caduri <cyuval@marvell.com>
Date: Tue, 1 May 2018 23:57:16 +0300
Subject: [PATCH 4/6] dts: musdk: a7k/8/8kp xor

Change-Id: Ib2f5aadf42d56d6cf32d3ab94a93d552e0df2c90
Signed-off-by: Yuval Caduri <cyuval@marvell.com>
---
 arch/arm64/boot/dts/marvell/armada-ap806.dtsi | 32 +++++++++++++++++++++++----
 arch/arm64/boot/dts/marvell/armada-cp110.dtsi | 12 ++++++++++
 2 files changed, 40 insertions(+), 4 deletions(-)

diff --git a/arch/arm64/boot/dts/marvell/armada-ap806.dtsi b/arch/arm64/boot/dts/marvell/armada-ap806.dtsi
index f805f21..6218a41 100644
--- a/arch/arm64/boot/dts/marvell/armada-ap806.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-ap806.dtsi
@@ -226,7 +226,7 @@
 				interrupts = <GIC_PPI 15 IRQ_TYPE_LEVEL_HIGH>;
 			};
 
-			xor@400000 {
+			xor0: xor@400000 {
 				compatible = "marvell,armada-7k-xor", "marvell,xor-v2";
 				reg = <0x400000 0x1000>,
 				      <0x410000 0x1000>;
@@ -235,7 +235,7 @@
 				dma-coherent;
 			};
 
-			xor@420000 {
+			xor1: xor@420000 {
 				compatible = "marvell,armada-7k-xor", "marvell,xor-v2";
 				reg = <0x420000 0x1000>,
 				      <0x430000 0x1000>;
@@ -244,7 +244,7 @@
 				dma-coherent;
 			};
 
-			xor@440000 {
+			xor2: xor@440000 {
 				compatible = "marvell,armada-7k-xor", "marvell,xor-v2";
 				reg = <0x440000 0x1000>,
 				      <0x450000 0x1000>;
@@ -253,7 +253,7 @@
 				dma-coherent;
 			};
 
-			xor@460000 {
+			xor3: xor@460000 {
 				compatible = "marvell,armada-7k-xor", "marvell,xor-v2";
 				reg = <0x460000 0x1000>,
 				      <0x470000 0x1000>;
@@ -262,6 +262,30 @@
 				dma-coherent;
 			};
 
+			uio_xor0 {
+				compatible = "marvell,uio-xor-v2";
+				xor_access = <&xor0>;
+				status = "okay";
+			};
+
+			uio_xor1 {
+				compatible = "marvell,uio-xor-v2";
+				xor_access = <&xor1>;
+				status = "okay";
+			};
+
+			uio_xor2 {
+				compatible = "marvell,uio-xor-v2";
+				xor_access = <&xor2>;
+				status = "okay";
+			};
+
+			uio_xor3 {
+				compatible = "marvell,uio-xor-v2";
+				xor_access = <&xor3>;
+				status = "okay";
+			};
+
 			spi0: spi@510600 {
 				compatible = "marvell,armada-380-spi";
 				reg = <0x510600 0x50>;
diff --git a/arch/arm64/boot/dts/marvell/armada-cp110.dtsi b/arch/arm64/boot/dts/marvell/armada-cp110.dtsi
index a8786a7..047eb14 100644
--- a/arch/arm64/boot/dts/marvell/armada-cp110.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-cp110.dtsi
@@ -346,6 +346,18 @@
 				 <&CP110_LABEL(clk) 1 14>;
 		};
 
+		CP110_LABEL(uio_xor0) {
+			compatible = "marvell,uio-xor-v2";
+			xor_access = <&CP110_LABEL(xor0)>;
+			status = "okay";
+		};
+
+		CP110_LABEL(uio_xor1) {
+			compatible = "marvell,uio-xor-v2";
+			xor_access = <&CP110_LABEL(xor1)>;
+			status = "okay";
+		};
+
 		CP110_LABEL(spi0): spi@700600 {
 			compatible = "marvell,armada-380-spi";
 			reg = <0x700600 0x50>;
-- 
2.7.4

