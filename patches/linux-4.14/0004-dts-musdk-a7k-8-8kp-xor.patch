From 24d8bd3ae201e9c22a8b3ce93683176bf50f8601 Mon Sep 17 00:00:00 2001
From: Yuval Caduri <cyuval@marvell.com>
Date: Tue, 1 May 2018 23:57:16 +0300
Subject: [PATCH 4/6] dts: musdk: a7k/8/8kp xor

Change-Id: Ib2f5aadf42d56d6cf32d3ab94a93d552e0df2c90
Signed-off-by: Yuval Caduri <cyuval@marvell.com>
---
 arch/arm64/boot/dts/marvell/armada-ap806.dtsi |   32 +++++++++++++++++++++----
 arch/arm64/boot/dts/marvell/armada-cp110.dtsi |   12 ++++++++++
 2 files changed, 40 insertions(+), 4 deletions(-)

diff --git a/arch/arm64/boot/dts/marvell/armada-ap806.dtsi b/arch/arm64/boot/dts/marvell/armada-ap806.dtsi
index 4203b8b..df5cbe3 100644
--- a/arch/arm64/boot/dts/marvell/armada-ap806.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-ap806.dtsi
@@ -265,7 +265,7 @@
 				interrupts = <GIC_PPI 15 IRQ_TYPE_LEVEL_HIGH>;
 			};
 
-			xor@400000 {
+			xor0: xor@400000 {
 				compatible = "marvell,armada-7k-xor", "marvell,xor-v2";
 				reg = <0x400000 0x1000>,
 				      <0x410000 0x1000>;
@@ -274,7 +274,7 @@
 				dma-coherent;
 			};
 
-			xor@420000 {
+			xor1: xor@420000 {
 				compatible = "marvell,armada-7k-xor", "marvell,xor-v2";
 				reg = <0x420000 0x1000>,
 				      <0x430000 0x1000>;
@@ -283,7 +283,7 @@
 				dma-coherent;
 			};
 
-			xor@440000 {
+			xor2: xor@440000 {
 				compatible = "marvell,armada-7k-xor", "marvell,xor-v2";
 				reg = <0x440000 0x1000>,
 				      <0x450000 0x1000>;
@@ -292,7 +292,7 @@
 				dma-coherent;
 			};
 
-			xor@460000 {
+			xor3: xor@460000 {
 				compatible = "marvell,armada-7k-xor", "marvell,xor-v2";
 				reg = <0x460000 0x1000>,
 				      <0x470000 0x1000>;
@@ -387,6 +387,30 @@
 				};
 			};
 
+			uio_xor0 {
+				compatible = "marvell,uio-xor-v2";
+				xor_access = <&xor0>;
+				status = "okay";
+			};
+
+			uio_xor1 {
+				compatible = "marvell,uio-xor-v2";
+				xor_access = <&xor1>;
+				status = "okay";
+			};
+
+			uio_xor2 {
+				compatible = "marvell,uio-xor-v2";
+				xor_access = <&xor2>;
+				status = "okay";
+			};
+
+			uio_xor3 {
+				compatible = "marvell,uio-xor-v2";
+				xor_access = <&xor3>;
+				status = "okay";
+			};
+
 			ap_thermal: thermal@6f808c {
 				compatible = "marvell,armada-ap806-thermal";
 				reg = <0x6f808c 0x4>,
diff --git a/arch/arm64/boot/dts/marvell/armada-cp110.dtsi b/arch/arm64/boot/dts/marvell/armada-cp110.dtsi
index a363f91..164730f 100644
--- a/arch/arm64/boot/dts/marvell/armada-cp110.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-cp110.dtsi
@@ -361,6 +361,18 @@
 			clocks = <&CP110_LABEL(clk) 1 7>;
 		};
 
+		CP110_LABEL(uio_xor0) {
+			compatible = "marvell,uio-xor-v2";
+			xor_access = <&CP110_LABEL(xor0)>;
+			status = "okay";
+		};
+
+		CP110_LABEL(uio_xor1) {
+			compatible = "marvell,uio-xor-v2";
+			xor_access = <&CP110_LABEL(xor1)>;
+			status = "okay";
+		};
+
 		CP110_LABEL(spi0): spi@700600 {
 			compatible = "marvell,armada-380-spi";
 			reg = <0x700600 0x50>;
-- 
1.7.9.5

